<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-testing-things" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Testing things</title>

    <!-- <introduction>
      <p>
        testing exercise in an introduction
      </p>
      <exercise>
        <statement>
          <p>
            test exercise
          </p>
        </statement>
      </exercise>
      <exercise component="proteus" xml:id="reading-D-4" label="reading-D-4">
          <title>Match vector spaces to basis size</title>
          <statement>
              <p>Drag the following vector spaces to the number of elements in a basis for the space.</p>
          </statement>
          <cardsort>
              <match>
                  <premise order="5"><m>\spn{\set{
                    \colvector{1\\2\\3},
                    \colvector{2\\4\\6},
                    \colvector{-1\\0\\1},
                    \colvector{0\\2\\4},
                    \colvector{1\\4\\7}
                    }}
                    </m>
                  </premise>
                  <response><m>2</m></response>
              </match>
              <match>
                  <response><m>3</m></response>
              </match>
              <match>
                  <premise order="1"><m>\complex{4}</m></premise>
                  <premise order="3"><m>P_3</m></premise>
                  <premise order="6"><m>M_{22}</m></premise>
                  <response><m>4</m></response>
              </match>
              <match>
                  <premise order="7">The span of a set of 5 linearly independent vectors</premise>
                  <premise order="2"><m>P_4</m></premise>
                  <response><m>5</m></response>
              </match>
              <match>
                  <premise order="4">The span of a set of 5 vectors</premise>
                  <response>Not enough information to tell</response>
            </match>
          </cardsort>
      </exercise>
    </introduction> -->

  <exploration xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="PA-1-5a" label="1-5a_Preview_traveltime_as_functionofspeed">
    <webwork xml:id="webwork-PA-1-5a">
      <!-- This exercise is very long. It runs the risk of butting up agains a server's URI length -->
      <!-- cap. So solutions are commented out for now.                                            -->
      <pg-code>
        Context("Point");
        $answer = List("(10,5),(50,1),(25,2)");
        $evaluator = $answer ->cmp(list_checker => sub {
          my ($correct,$student,$ansHash,$value) = @_;
          my $n = scalar(@$student);  # number of student answers
          my $score = 0;              # number of correct student answers
          my @errors = ();            # stores error messages
          my $i, $j;                  # loop counters

          #
          #  Loop though the student answers
          ##
          for ($i = 0; $i &lt; $n; $i++) {
            my $ith = Value::List->NameForNumber($i+1);
            my $p = $student->[$i];   # i-th student answer
            #
            #  Check that the student's answer is a point
            #
            if ($p->type ne "Point") {
              push(@errors,"Your $ith entry is not a point");
              next;
            }
            #
            #  Check that the point hasn't been given before
            #
            for ($j = 0, $used = 0; $j &lt; $i; $j++) {
              if ($student->[$j]->type eq "Point" &amp;&amp; $student->[$j] == $p) {
                push(@errors,"Your $ith point is the same as a previous one") unless $ansHash->{isPreview};
                $used = 1; last;
              }
            }
            #
            #  If not already used, check that it satisfies the equation
            #    and increase the score if so.
            #
            if (!$used) {
              my ($a,$b) = $p->value;
              if ($a * $b == 50 &amp;&amp; $a > 0) {$score++} else {
                push(@errors,"Your $ith point is not correct") unless $ansHash->{isPreview}
              }
            }
          }
          #
          #  Check that there are the right number of answers
          #
          if (!$ansHash->{isPreview}) {
            push(@errors,"You need to provide more points") if $i &lt; 3;
            push(@errors,"You have given too many points") if $score > 3 &amp;&amp; $i != $score;
          }
          return ($score,@errors);
        });


        $radio = RadioButtons([
          'The function is concave up because as speed goes up, travel time goes up.',
          'The function is concave down because as speed goes up, travel time goes down.',
          'The function is increasing because as speed goes up, travel time goes up.',
          'The function is decreasing because as speed goes up, travel time goes down.',
          ], 3
        );
        Context("Numeric")->flags->set(tolType => 'absolute', tolerance => 0.01);
        $answer2 = NumberWithUnits("5/6 hr");
        $radio2 = RadioButtons([
          "${BM}T(60)${EM} is the speed, ${BM}60${EM} mph.",
          "${BM}T(60)${EM} is the distance, ${BM}60${EM} miles.",
          "${BM}T(60)${EM} is the time it takes to travel ${BM}50${EM} miles at a speed of ${BM}60${EM} mph.",
          "${BM}T(60)${EM} is how fast the travel time is changing when the car is traveling at a speed of ${BM}60${EM} mph.",
          ], 2
        );
        $answer3 = NumberWithUnits("(50/65-50/60)/5 hr/mph");
        $popup = PopUp([
          "",
          "positive",
          "negative",
          ], 2
        );
        $radio3 = RadioButtons([
          "${BM}T${EM} is increasing from ${BM}60${EM} to ${BM}65${EM} mph.",
          "${BM}T${EM} is decreasing from ${BM}60${EM} to ${BM}65${EM} mph.",
          "${BM}T${EM} is concave up from ${BM}60${EM} to ${BM}65${EM} mph.",
          "${BM}T${EM} is concave down from ${BM}60${EM} to ${BM}65${EM} mph.",
          ], 1
        );
        $radio4 = RadioButtons([
          "${BM}AV_{[60, 65]}${EM} is the amount of hours ${BM}T${EM} has changed from ${BM}60${EM} to ${BM}65${EM} mph.",
          "${BM}AV_{[60, 65]}${EM} is the change in speed from ${BM}60${EM} to ${BM}65${EM} mph.",
          "${BM}AV_{[60, 65]}${EM} is the average change in hours the trip takes when the speed changes from ${BM}60${EM} to ${BM}65${EM} mph.",
          ], 2
        );
      </pg-code>
      <introduction>
          <p>
            Suppose that you are driving a car on the highway using cruise control so that you drive at a constant speed.  The time, <m>T</m> (measured in hours), it takes to drive 50 miles depends on the constant rate, 
            <m>s</m> (measured in miles per hour) at which you are driving.  Since 
            <me>
              \mbox{distance} = \mbox{rate} \cdot \mbox{travel time}
            </me>,
            it follows that 
            <me>
              \mbox{travel time} =  \frac{\mbox{distance}}{\mbox{rate}}
            </me>,
            and thus we know that <m>T(s) = \frac{50}{s}</m>.  
          </p>
          <p>  
            For instance, observe that <m>T(75) = \frac{50}{75} = \frac{2}{3}</m>, so it takes <m>\frac{2}{3}</m> of an hour to drive <m>50</m> miles at <m>75</m> miles per hour, and the point <m>(75, \frac{2}{3})</m> lies on the graph of <m>T(s)</m>.
          </p>

        <!-- <image>
          <latex-image>
            \begin{tikzpicture}
              \begin{axis}[
                xmin = -2,
                xmax = 2,
                xtick = {-1, 1},
                minor xtick = {-2,-1.5,...,2},
                ymin = -0.5,
                ymax = 3,
                ytick = {1,2,3},
                minor ytick = {-0.5,0,...,3.5},
                legend style = {at = {(0.03, 0.97)}, anchor=north west}
              ]
                \addplot+[domain=-2:1.26] {e^x};
                \addlegendentry{\(f(x) = e^x\)};
                \addplot+[domain=-1.5:2] {1 + x};
                \addlegendentry{\(L(x) = 1 + x\)};
                \addplot[soliddot] coordinates {(0, 1)};
                \draw[guideline] (axis cs:0.25, 0.75) -| (axis cs:-0.25, 1.25) -| cycle;
              \end{axis}
            \end{tikzpicture}
            \qquad
            \begin{tikzpicture}
              \begin{axis}[
                xmin = -0.25,
                xmax = 0.25,
                xtick = {},
                ymin = .75,
                ymax = 1.25,
                ytick = {},
                axis lines = none
              ]
                \addplot+[domain=-0.25:0.25] {e^x};
                \addplot+[domain=-0.25:0.25] {1 + x};
                \addplot[soliddot] coordinates {(0, 1)};
              \end{axis}
            \end{tikzpicture}
          </latex-image>
        </image> -->
      </introduction>

      <task>
        <statement>
          <p>
            Give three points which lie on the graph of <m>T</m>, separated by commas.
          </p>
          <p><var name="$answer" evaluator="$evaluator" width="10" /></p>
          <!-- how to do this?  list of three points where they can't be the same and y has to be 50/x. restriction on domain?-->
          <p>
            Which of the following statements <em>and explanations</em> is true about the graph of <m>T(s)</m>?
          </p>
          <p>
            <var name="$radio" form="buttons"/>
          </p>
        </statement>
      </task>

      <task>
        <statement>
          <p>
            What is the value of <m>T(60)</m>? Include units on your answer. 
          </p>
          <p>
            <var name="$answer2" width="10"/>
          </p>
          <p>
            Which of the following is the best explanation of the meaning of this 
        value in context?
          </p>
          <p>
            <var name="$radio2" form="buttons"/>
          </p>
        </statement>
      </task>

      <task>
        <statement>
          <p>
            Recall the average rate of change of a function on an interval <m>[a,b]</m>, as stated in 
              <xref ref="def-1-3-aroc">Definition</xref>, <m>AV_{[a,b]}</m>. 
              Determine the average rate of <m>T</m> on the interval <m>[60,65]</m>, <m>AV_{[60, 65]}</m>.  Include units on your answer.
          </p>
          <p>
            <var name="$answer3" width="10"/>
          </p>
        </statement>
      </task>

      <task>
        <statement>
          <p>
            The sign of <m>AV_{[60, 65]}</m> is <var name="$popup" form="popup"/>
          </p>
          <p>This sign makes sense because</p>
          <p>
            <var name="$radio3" form="buttons"/>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Which of the following explains the meaning of the value of <m>AV_{[60, 65]}</m>? 
          </p>
          <p>
            <var name="$radio4" form="buttons"/>
          </p>
        </statement>
      </task>
    </webwork>
  </exploration>

    <exercise component="proteus" xml:id="reading-SS-5" label="reading-SS-5-v1">
      <title>Another membership in span</title>
      <statement>
          <p>The steps on the right below show that the vector <m>\vect{y}</m> is in the span of <m>S</m>, <m>\spn{S}</m>.  
            Match the reasons on the left to the step on the right.
            <md>
              <mrow>\vect{y}&amp;=\colvector{1\\3\\2}&amp;S&amp;=\set{\colvector{2\\1\\0},\,\colvector{-3\\1\\2}}</mrow>
            </md></p>
      </statement>
      <cardsort>
        <match>
          <premise order="3">By <xref ref="theorem-SLSLC"/>, since we are looking for solutions to the vector equation <me>a_1\colvector{2\\1\\0} + a_2\colvector{-3\\1\\2} = \colvector{1\\3\\2}</me>, 
            which forms a linear system in the variables <m>a_1</m> and <m>a_2</m>.</premise>
          <response>Form the augmented matrix <m>\begin{bmatrix} 2 \amp -3 \amp 1 \\ 1 \amp 1 \amp 3 \\ 0 \amp 2 \amp 2 \end{bmatrix}</m></response>
        </match>
        <match>
          <premise order="1"><xref ref="theorem-REMES"/> says that the solution to the linear system is the same, and solutions are
            easier to see if the augmented matrix is in reduced row echelon form.
          </premise>
          <response>Row reduce the augmented matrix and obtain <m>\begin{bmatrix} 1 \amp 0 \amp 2 \\ 0 \amp 1 \amp 1 \\ 0 \amp 0 \amp 0 \end{bmatrix}</m>.</response>
        </match>
        <match>
          <premise order="2">By <xref ref="theorem-RCLS"/>, since the last column is not a pivot column there is at least one
            solution to the vector equation; in this case, when <m>a_1=2</m> and <m>a_2=1</m>.
          </premise>
          <response><m>\vect{y}\in\spn{S}</m>.</response>
        </match>
      </cardsort>
    </exercise>

    <exercise component="proteus" xml:id="reading-MISLE-5" label="reading-MISLE-5-v1">
      <title>Two ways to calculate inverses</title>
      <statement>
          <p>
            The process we should use for calculating the inverse of a square matrix is different 
            depending on whether the matrix is <m>2\times 2</m> or a larger size.
          </p>
          <p>Match the steps on the left to the correct goal on the right.  In this problem, 
            the order of steps is unimportant, unlike when you're actually calculating inverses. Note that
          some listed steps may not be part of either process.</p>
      </statement>
      <cardsort>
        <match>
          <premise order="1">Compute the quantity <m>ad-bc</m>.</premise>
          <premise order="7">If <m>ad-bc \neq 0</m>, the inverse is <m>\frac{1}{ad-bc}\begin{bmatrix} d \amp -b \\ -c \amp a \end{bmatrix}</m></premise>
          <response>Calculate the inverse of <m>\begin{bmatrix} a \amp b \\ c \amp d \end{bmatrix}</m></response>
        </match>
        <match>
          <premise order="2">Augment <m>A</m> on the right by the <m>n\times n</m> identity matrix, resulting in an 
          <m>n\times 2n </m> matrix.</premise>
          <premise order="5">Row reduce the <m>n\times 2n</m> matrix.  If the first <m>n</m> columns contain 
            the <m>n\times n</m> identity matrix, then <m>A^{-1}</m> is the matrix contained in the last <m>n</m> columns.</premise>
          <response>Calculate the inverse of a square matrix <m>A</m> of size <m>n\geq 3</m>.</response>
        </match>
        <match>
          <premise order="4">If <m>ad-bc \neq 0</m>, the inverse is <m>\frac{1}{ad-bc}\begin{bmatrix} a \amp b \\ c \amp d \end{bmatrix}</m></premise>
          <premise order="3">Find the reduced row echelon form of <m>A</m>.</premise>
          <premise order="8">If <m>ad-bc \neq 0</m>, the inverse is <m>\frac{1}{ad-bc}\begin{bmatrix} -a \amp c \\ b \amp -d \end{bmatrix}</m></premise>
        </match>
      </cardsort>
    </exercise>

    <exercise component="proteus" xml:id="reading-MR-5" label="reading-MR-5-v1">
	<title>Algorithm for finding a matrix representation</title>
		<statement>
			<p>The following are possible steps for finding the matrix representation <m>\matrixrep{T}{B}{C}</m> of the linear transformation 
			<me>\ltdefn{T}{\complex{2}}{\complex{2}},\quad\lteval{T}{\colvector{x_1\\x_2}}=\colvector{2x_1-x_2\\3x_1+2x_2}
			</me>
			relative to the bases
			<md><mrow>B&amp;=\set{\colvector{2\\3},\,\colvector{-1\\2}}&amp;
                      C&amp;=\set{\colvector{1\\0},\,\colvector{1\\1}}
                </mrow>
            </md>.
            Put the correct steps in order.
			</p>
		</statement>
        <blocks>
          <block order="2" correct="no">
            <p>Evaluate <m>T</m> with each element of the basis <m>C</m> of the codomain, that is find
            	<me>\lteval{T}{\colvector{1\\0}}, \quad \lteval{T}{\colvector{1\\1}}</me>.
            </p>
          </block>
          <block order="3">
            <p>Evaluate <m>T</m> with each element of the basis <m>B</m> of the domain, that is find
            	<me>\lteval{T}{\colvector{2\\3}}, \quad \lteval{T}{\colvector{-1\\2}}</me>.
            </p>
          </block>
          <block order="1" correct="no" >
            <p>Coordinatize the result relative to the basis <m>B</m> of the domain. 
            </p>
          </block>
          <block order="4">
            <p>Coordinatize the result relative to the basis <m>C</m> of the codomain.
            </p>
          </block>
          <block order="5" correct="no">
            <p> Employ Definition MR to fill rows of a matrix with the coordinatization.
            </p>
          </block>
          <block order="6" >
            <p>Employ Definition MR to fill columns of a matrix with the coordinatization.
            </p>
          </block>
        </blocks>
    </exercise>



      <exercise component="proteus" xml:id="reading-VR-4" label="reading-VR-4-v1">
        <title>Algorithm for Calculating a Vector Representation</title>
        <statement>
          <p>
            Calculate the vector representation <m>\vectrep{B}{\vect{y}}</m> for the
            vector and basis given below.
            <md>
              <mrow>\vect{y}&amp;=\colvector{-2\\3\\2}&amp;B&amp;=\set{\vect{u}_1,\,\vect{u}_2,\,\vect{u}_3}=\set{\colvector{2\\5\\-1},\,\colvector{-5\\3\\4},\,\colvector{-2\\5\\2}}</mrow>
                    </md>
            Put the correct steps in order.  
          </p>
        </statement>
        <blocks>
          <block order="2" correct="yes">
              <p>To find <m>\vectrep{B}{\vect{y}}</m>, we need to find scalars, <m>a_1,\,a_2,\,a_3</m> such that
                <me>\vect{y}=a_1\vect{u}_1+a_2\vect{u}_2+a_3\vect{u}_3</me>.</p>
          </block>
          <block order="5" correct="yes">
              <p>By Theorem SLSLC, the set of solutions to the vector equation
              <me>a_1\colvector{2\\5\\-1} + a_2\colvector{-5\\3\\4} + a_3\colvector{-2\\5\\2}=\colvector{-2\\3\\2}</me>
              is the set of solutions to the linear system with augmented matrix
              <me>A = \begin{bmatrix}
              2 &amp; -5 &amp; -2 &amp; -2\\
              5 &amp; 3 &amp; 5 &amp; 3\\
              -1 &amp; 4 &amp; 2 &amp; 2
              \end{bmatrix}</me>.</p>
          </block>
          <block order="4" correct="yes">
              <p>The reduced row-echelon form of <m>A</m> is
              <me>\begin{bmatrix}
              \leading{1} &amp; 0 &amp; 0 &amp;-4 \\
              0 &amp; \leading{1} &amp; 0 &amp; -4\\
              0 &amp; 0 &amp; \leading{1} &amp; 7
              \end{bmatrix}</me>.</p>
          </block>
          <block order="1" correct="yes">
              <p>The unique solution is 
                <md>
                  <mrow>a_1&amp;=-4&amp;a_2&amp;=-4&amp;a_3&amp;=7</mrow>
                </md>.
              </p>
          </block>
          <block order="6" correct="yes">
              <p>Then by Definition VR, we have <me>\vectrep{B}{\vect{y}}=\colvector{-4\\-4\\7}</me>.</p>
          </block>
          <block order="3" correct="no">
              <p>Place the four vectors into a matrix and row-reduce.</p>
          </block>
          <block order="7" correct="no">
              <p>We calculate that <me>
                \vectrep{B}{\vect{y}} = -2\colvector{2\\5\\-1} + 3\colvector{-5\\3\\4} + 2\colvector{-2\\5\\2}=\colvector{-23\\9\\18}
              </me>
              </p>
          </block>
        </blocks>
      </exercise>

      <exercise component="proteus" xml:id="reading-SD-4" label="reading-SD-4-v1">
        <title>Algorithm for Diagonalizing a Matrix</title>
        <statement>
          <p>
            The following are possible steps for diagonalizing the matrix
            <me>
              A=\begin{bmatrix} 3 \amp 1 \amp -2 \\ -4 \amp -2 \amp 2 \\ 0 \amp 0 \amp -1 \end{bmatrix}
            </me>.
            Put the correct steps in order.  
          </p>
        </statement>
        <blocks>
          <block order="2" correct="no">
            <p>
              Calculate that the reduced row echelon form of <m>A</m> is the identity matrix.
            </p>
          </block>
          <block order="3">
            <p>
              Compute the eigenvalues of <m>A</m>.  The eigenvalues are <m>2</m> and <m>-1</m>.
            </p>
          </block>
          <block order="1" correct="no" >
            <p>
              A check on your work is that <m>A=S^{-1}DS</m>.
            </p>
          </block>
          <block order="7">
            <p>
              Calculate the eigenspaces of <m>A</m>.  The eigenspaces are 
              <m>\eigenspace{A}{-1}=\spn{\set{\colvector{1\\2\\3},\colvector{0\\2\\1}}}</m> and 
              <m>\eigenspace{A}{2}=\spn{\set{\colvector{-1\\1\\0}}}</m>.
            </p>
          </block>
          <block order="4">
            <p>
              Then one possibility is <m>S=\begin{bmatrix} 1 \amp -1 \amp 0 \\ 2 \amp 1 \amp 2 \\ 3 \amp 0 \amp 1 \end{bmatrix}</m>
              and <m>D=\begin{bmatrix} -1 \amp 0 \amp 0 \\ 0 \amp 2 \amp 0 \\ 0 \amp 0 \amp -1 \end{bmatrix}</m>.
            </p>
          </block>
          <block order="5" correct="no" >
            <p>
              A check on your work is that <m>DS=SA</m>.
            </p>
          </block>
          <block order="6" >
            <p>
              A check on your work is that <m>D=S^{-1}AS</m>.
            </p>
          </block>
        </blocks>
      </exercise>

      <exercise component="proteus" xml:id="reading-SD-6" label="reading-SD-6-v1">
        <title>Properties of Similarity</title>
        <statement>
          <p>
            Select all the matrices which are similar to the matrix
            <me>
              A = \begin{bmatrix}
              5 &amp; -10 &amp; -5 \\
              2 &amp; 14 &amp; 2 \\
              -4&amp; -8 &amp; 6
              \end{bmatrix}
            </me>.
          </p>
        </statement>
        <choices>
          <choice correct="no">
            <statement>
              <p>
                <m>
                  \begin{bmatrix}
                  0 &amp; 0 &amp; 0 \\
                  0 &amp; 0 &amp; 0 \\
                  0 &amp; 0 &amp; 0
                  \end{bmatrix}
                </m>
              </p>
            </statement>
          </choice>

          <choice correct="no">
            <statement>
              <p>
                <m>
                  \begin{bmatrix}
                  1 &amp; 0 &amp; 0 \\
                  0 &amp; 1 &amp; 0 \\
                  0 &amp; 0 &amp; 1
                  \end{bmatrix}
                </m>
              </p>
            </statement>
          </choice>
          <choice correct="yes">
            <statement>
              <p>
                <m>
                  \begin{bmatrix}
                  5 &amp; -10 &amp; -5 \\
                  2 &amp; 14 &amp; 2 \\
                  -4&amp; -8 &amp; 6
                  \end{bmatrix}
                </m>
              </p>
            </statement>
          </choice>
          <choice correct="no">
            <statement>
              <p>
                <m>
                  \begin{bmatrix}
                  -10 &amp; 5 &amp;  -5 \\
                  14 &amp; 2 &amp;  2 \\
                  -8 &amp; -4&amp;   6
                  \end{bmatrix}
                </m>
              </p>
            </statement>
          </choice>
          <choice correct="no">
            <statement>
              <p>
                <m>
                  \begin{bmatrix}
                  5 &amp; 0 &amp; 0 \\
                  0 &amp; 10 &amp; 0 \\
                  0 &amp; 0 &amp; 5
                  \end{bmatrix}
                </m>
              </p>
            </statement>
          </choice>
          <choice correct="yes">
            <statement>
              <p>
                <m>
                  \begin{bmatrix}
                  10 &amp; 0 &amp; 0 \\
                  0 &amp; 10 &amp; 0 \\
                  0 &amp; 0 &amp; 5
                  \end{bmatrix}
                </m>
              </p>
            </statement>
          </choice>
        
        </choices>
          
      </exercise>
              

    <xi:include href="participate-worksheets/sec_optionallab-alt2.ptx" />



    <image width="50%">
      <shortdescription>demonstrating new domains and ranges improvements</shortdescription>
      <prefigure xmlns="https://prefigure.org"
              label="prefigure-test-domains3"> 
        <diagram dimensions="(300,300)" margins="5">
          <coordinates bbox = "(-4,-4,4,4)">
            <grid-axes/>
            <definition>f(x)=-x^2/2 + 2</definition>
            <definition>g(x)=exp(x/2)</definition>
            <graph function="f"/>
            <graph function="g" stroke="green"/>
            <tangent-line function="f" point="2" name="tan"/>
            <definition>b = intersect((g, tan), -1)</definition>
            <point p="(b,g(b))" />
            <definition>c = intersect(f, -1)</definition>
            <point p="(c,f(c))" />

          </coordinates>
        </diagram>

      </prefigure>
      </image>



   <image width="50%">
      <shortdescription>demonstrating new domains and ranges improvements</shortdescription>
      <prefigure xmlns="https://prefigure.org"
              label="prefigure-test-domains"> 
        <diagram dimensions="(300,300)" margins="5">
          <definition>a=1</definition>
          <definition>s(x) = x^2</definition>
          <definition>f(x) = exp(x^2/2-3*x)</definition>
          <definition>g(x) = 1/x</definition>
          <definition>h(x) = sqrt(2-x)</definition>
          <definition>r(x) = 1/((x-2)*(x+2))</definition>
          <coordinates bbox="[-4,-4,4,4]">
            <grid-axes xlabel="x" ylabel="y"/>

            <graph at="graphs" function='s' stroke ="black"/>
            <graph at="graphf" function='f' />
            <graph at="graphg" function='g' stroke="red" />
            <graph at="graphh" function='h' N="500" stroke="yellow"/>
            <graph at="graphr" function='r' stroke="purple"/>

          </coordinates>

          <!-- <annotations>
            <annotation ref="figure"
                        text="The graphs of some functions with domain or range issues">
              <annotation ref="graphs" text="The graph of x squared" sonify="yes"/>
              <annotation ref="graphf" text="The graph of an exponential function" sonify="yes"/>
              <annotation ref="graphg" text="The graph of 1 over x" sonify="yes"/>
              <annotation ref="graphh" text="The graph of square root of 2 minus x" sonify="yes"/>
              <annotation ref="graphr" text="The graph of 1 over x+2 times x minus 2" sonify="yes"/>
            </annotation>
          </annotations> -->

        </diagram>
      </prefigure>
      </image>

    <image width="50%">
      <shortdescription>demonstrating new domains and ranges improvements</shortdescription>
      <prefigure xmlns="https://prefigure.org"
              label="prefigure-test-domains2"> 
        <diagram dimensions="(300,300)" margins="5">
          <definition>a=1</definition>
          <definition>s(x) = x^2</definition>
          <definition>f(x) = exp(x^2/2-3*x)</definition>
          <definition>g(x) = 1/x</definition>
          <definition>h(x) = sqrt(2-x)</definition>
          <definition>r(x) = 1/((x-2)*(x+2))</definition>
          <coordinates bbox="[-4,-4,4,4]">
            <grid-axes xlabel="x" ylabel="y"/>

            <graph at="graphs" function='s' stroke="black"/>
            <graph at="graphf" function='f' />
            <graph at="graphg" function='g' stroke="red" />
            <graph at="graphh" function='h' N="500" stroke="yellow"/>
            <graph at="graphr" function='r' stroke="purple"/>

          </coordinates>

          <annotations>
            <annotation ref="figure"
                        text="The graphs of some functions with domain or range issues">
              <annotation ref="graphs" text="The graph of x squared" sonify="yes"/>
              <annotation ref="graphf" text="The graph of an exponential function" sonify="yes"/>
              <annotation ref="graphg" text="The graph of 1 over x" sonify="yes"/>
              <annotation ref="graphh" text="The graph of square root of 2 minus x" sonify="yes"/>
              <annotation ref="graphr" text="The graph of 1 over x+2 times x minus 2" sonify="yes"/>
            </annotation>
          </annotations>

        </diagram>
      </prefigure>
      </image>
  


    

  <exercise component="proteus" xml:id="reading-D-5" label="reading-D-5">
    <title>Match matrix properties to their number</title>
    <statement>
        <p>Let <m>A</m> be a matrix whose reduced row echelon form is given below.
        <me>
          \begin{bmatrix}
            \leading{1} \amp -2 \amp 0 \amp 1 \amp 4\\
            0 \amp 0  \amp \leading{1} \amp -2 \amp 3\\
            0 \amp 0 \amp 0 \amp 0 \amp 0 \\
          \end{bmatrix}
        </me>
        </p>
    </statement>
    <cardsort>
        <match>
          <premise order="6"><m>\dimension{\lns{A}}</m></premise>
          <response><m>1</m></response>
        </match>
        <match>
          <premise order="2"><m>\rank{A}</m></premise>
          <premise order="4"><m>\dimension{\rsp{A}}</m></premise>
          <premise order="5"><m>\dimension{\csp{A}}</m></premise>
          <response><m>2</m></response>
        </match>
        <match>
            <premise order="1"><m>\nullity{A}</m></premise>
            <premise order="3"><m>\dimension{\nsp{A}}</m></premise>
            <premise order="7">Number of variables in <m>\homosystem{A}</m></premise>
            <response><m>3</m></response>
        </match>
        <match>
            <response><m>4</m></response>
        </match>
        <match>
            <response><m>5</m></response>
        </match>
      </cardsort>
  </exercise>

  <exercise component="proteus" xml:id="reading-D-6" label="reading-D-6">
    <title>Dimension, linear independence, and spanning</title>
    <statement>
        <p>Let <m>V</m> be a vector space of dimension <m>5</m>.  Explain each of your 
          answers to the questions below.
          <ol>
            <li>
              <p>
                Can there be a spanning set of <m>V</m> with <m>4</m> elements?  <m>6</m> elements? 
              </p>
            </li>
            <li>
              <p>
                Can there be a linearly independent set of vectors in <m>V</m> with <m>4</m> elements?  <m>6</m> elements?
              </p>
            </li>
            <li>
              <p>
                Can there be a basis of <m>V</m> with <m>4</m> elements?  <m>6</m> elements?
              </p>
            </li>
          </ol>
        </p>   
    </statement>
    <response/>
  </exercise>

    <image width="50%">
      <shortdescription>a number line</shortdescription>
      <prefigure xmlns="https://prefigure.org"
              label="prefigure-ex-numberline">
        <diagram dimensions="(300,100)" margins="5">
  <coordinates bbox="(-1,-2,11,2)">
      <definition substitution="no">
        labels=['0','1','2','3','4','5','6','7','8','9','10']
      </definition>
    <line endpoints="((-0.5,0), (10.5,0))" stroke="black"
	  thickness="3" arrows="2"/>
    <repeat parameter="k=0..10">
      <line endpoints="((k,-.2), (k,.2))" stroke="black"
	  thickness="1" />
      <label anchor="(k,-.2)" alignment="south">
        <m>${labels[k]}</m>
    </label>
    </repeat>
    <line endpoints="((5,.2), (10,.2))" stroke="black"
	  thickness="2" arrows="1"/>
    <circle center="(5,.1)" radius=".3" fill="green" thickness="5"/>
  </coordinates>
</diagram>
</prefigure>
    </image>

    

  <exercise label="test-response"><title>Testing Interactive and Response together</title>
    <statement>
      <p>
        Some text.
      </p>
      <figure>
        <caption>Solutions to the equation <m>15x+6y=15</m></caption>
        <interactive label="test-response-a" xml:id="desmos-15xplus6yis15-a" desmos="vvw2yv58qm" width="85%" aspect="4:3" />
      </figure>
    </statement>
    <response component="responses"/> 
  </exercise>


  <exercise><title>Testing tabs and prefigure</title>
  <introduction>
    <p>
      testing the intro
    </p>
  </introduction>
  <task>
    <statement>
      <p>
        With annotations
      </p>
      <image width="40%">
          <shortdescription>Graph of two lines and their point of intersection</shortdescription>
          <prefigure xmlns="https://prefigure.org"
              label="prefigure-sonylines-d">
      <diagram dimensions="(300,300)" margins="5">
  <definition>a=1/3</definition>
  <definition>f(x) = 2-x</definition>
  <definition>g(x) = (15-15*x)/6</definition>
  <coordinates bbox="[-3.5,-2.5,3.5,4.5]">
    <grid-axes hlabels="(1,1,1)" vlabels="(1,1,1)" xlabel="x" ylabel="y"/>

    <group at="graph-fg" outline="tactile">
      <graph at="graph-f" function='f' stroke="red"/>
      <graph at="graph-g" function='g' stroke="blue" />
      <point at="point" p="(a, f(a))" stroke="black" fill="black">
      </point>
    </group>
  </coordinates>

  <annotations>
    <annotation ref="figure"
                text="The graph of two lines and their point of intersection">
        <annotation ref="graph-f" text="The graph of x+y=2" sonify="yes"/>
        <annotation ref="graph-g" text="The graph of 15x+6y=15" sonify="yes"/>
        <annotation ref="point" text="The point of intersection"/>
    </annotation>
  </annotations>

</diagram>
    </prefigure>
    </image>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        With annotations and dimensions changed to (200,200).
      </p>
      <image width="40%">
          <shortdescription>Graph of two lines and their point of intersection</shortdescription>
          <prefigure xmlns="https://prefigure.org"
              label="prefigure-sonylines-b">
      <diagram dimensions="(200,200)" margins="5">
  <definition>a=1/3</definition>
  <definition>f(x) = 2-x</definition>
  <definition>g(x) = (15-15*x)/6</definition>
  <coordinates bbox="[-3.5,-2.5,3.5,4.5]">
    <grid-axes hlabels="(1,1,1)" vlabels="(1,1,1)" xlabel="x" ylabel="y"/>

    <group at="graph-fg" outline="tactile">
      <graph at="graph-f" function='f' stroke="red"/>
      <graph at="graph-g" function='g' stroke="blue" />
      <point at="point" p="(a, f(a))" stroke="black" fill="black">
      </point>
    </group>
  </coordinates>

  <annotations>
    <annotation ref="figure"
                text="The graph of two lines and their point of intersection">
        <annotation ref="graph-f" text="The graph of x+y=2" sonify="yes"/>
        <annotation ref="graph-g" text="The graph of 15x+6y=15" sonify="yes"/>
        <annotation ref="point" text="The point of intersection"/>
    </annotation>
  </annotations>

</diagram>
    </prefigure>
    </image>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        Without annotations
      </p>
      <image width="40%">
          <shortdescription>Graph of two lines and their point of intersection</shortdescription>
          <prefigure xmlns="https://prefigure.org"
              label="prefigure-sonylines-c">
      <diagram dimensions="(300,300)" margins="5">
  <definition>a=1/3</definition>
  <definition>f(x) = 2-x</definition>
  <definition>g(x) = (15-15*x)/6</definition>
  <coordinates bbox="[-3.5,-2.5,3.5,4.5]">
    <grid-axes hlabels="(1,1,1)" vlabels="(1,1,1)" xlabel="x" ylabel="y"/>

    <group at="graph-fg" outline="tactile">
      <graph at="graph-f" function='f' stroke="red"/>
      <graph at="graph-g" function='g' stroke="blue" />
      <point at="point" p="(a, f(a))" stroke="black" fill="black">
      </point>
    </group>
  </coordinates>

  <!-- <annotations>
    <annotation ref="figure"
                text="The graph of two lines and their point of intersection">
        <annotation ref="graph-f" text="The graph of x+y=2" sonify="yes"/>
        <annotation ref="graph-g" text="The graph of 15x+6y=15" sonify="yes"/>
        <annotation ref="point" text="The point of intersection"/>
    </annotation>
  </annotations> -->

</diagram>
    </prefigure>
    </image>
    </statement>
  </task>
</exercise>

<xi:include href="participate-worksheets/dc-rrefa.ptx" />

<exercise label="matching-function-types">
    <title>Non 1-1 Matching Problem, Function Types</title>
    <idx>matching function types</idx>
    <statement>
      <p>
        Sort the following functions into their correct categories.
      </p>
    </statement>
    <feedback>
      <p>
        Review
        <url href="https://activecalculus.org/prelude/sec-changing-linear.html" visual="A precalculus textbook that could help"> Active Prelude to Calculus</url>
        url.
      </p>
    </feedback>
    <cardsort>
    <match>
      <response>Linear</response>
      <premise order="4"><m>y=5x+3</m></premise>
      <premise order="5"><m>\pi x - 6y = \sqrt{2}</m></premise>
      <premise order="6"><m>y=\frac{-1}{2}x+e</m></premise>
    </match>
    <match>
      <response>Quadratic</response>
    </match>
    <match>
      <premise order="7"><m>y=x^3-x</m></premise>
    </match>
    <match>
      <response>Exponential</response>
      <premise order="1"><m>y=2^x</m></premise>
    </match>
    <match>
      <response>Power</response>
      <premise order="2"><m>y=3x^5</m></premise>
      <premise order="3"><m>y=\sqrt{x}</m></premise>
    </match>
  </cardsort>
  </exercise>

  <exercise label="matrix-indices1">
      <title>How a matrix is indexed, old markup</title>
      <statement>
        <p>
          In the matrix <me>A=\begin{bmatrix} 2 \amp -1 \amp 3 \amp 5 \\ 0 \amp 3\amp 6\amp -3 \\ 4 \amp -2 \amp 7 \amp 5   \end{bmatrix}</me>
          what is <m>a_{23}</m>? <var width="5" /> 
        </p>
      </statement>
      <setup>
        <var>
          <condition number="6">
            <feedback>
              <p>
                The entry in the second row and third column is 6.
              </p>
            </feedback>
            </condition>
        <condition number="-2">
        <feedback>
          <p>
            The row number comes first, then the column number.  
          </p>
        </feedback>
        </condition>
        <condition string=".*">
        <feedback>
          <p>
            Incorrect.  If you're stuck, try reviewing the <xref ref="def_matrix">definition of matrix</xref>.  
          </p>
        </feedback>
        </condition>
        </var>
      </setup>
    </exercise>


    <exercise label="matrix-indices2">
      <title>How a matrix is indexed, new markup</title>
      <statement>
        <p>
          In the matrix <me>A=\begin{bmatrix} 2 \amp -1 \amp 3 \amp 5 \\ 0 \amp 3\amp 6\amp -3 \\ 4 \amp -2 \amp 7 \amp 5   \end{bmatrix}</me>
          what is <m>a_{23}</m>? <fillin width="5" answer="6" /> 
        </p>
      </statement>
      <evaluation>
        <evaluate>
        <test correct="yes">
        <numcmp use-answer="yes" />
        <feedback>
          <p>
            The number in the second row and third column is <m>6</m>. 
          </p>
        </feedback>
        </test>
      
        <test>
        <numcmp value="-2" />
        <feedback>
          <p>
            You gave the entry in the third row and second column, but <m>a_{23}</m> is the number in the second row and third column.    
          </p>
        </feedback>
        </test>

        <test>
          <feedback>
            <p>
              Incorrect.  If you're stuck, try reviewing the <xref ref="def_matrix">definition of matrix</xref>.  
            </p>
          </feedback>
        </test>
        <!-- would like that link to go to the definition, not just the section.  check when it's deployed, maybe ask Brian. It worked in the old markup.-->
    
        </evaluate>
        </evaluation>
    </exercise>

    <exercise label="fruit-puzzle1">
    <title>Solve a fruit puzzle, image child of paragraph</title>
    <statement>
      <p>
        <image width="40%" source="fruitpuzzleimage8.jpeg">
          <shortdescription>an algebra puzzle involving food, claiming most people can't solve it</shortdescription>
        </image>
      </p>
      <p>
        The image above says that three apples total 18, while an apple plus two bunches of bananas total 14, 
        and a bunch of bananas minus cherries equals 2.  
      </p>
      <p>
        Then it asks a question: how much does cherries plus an apple plus 
        a bunch of bananas equal? The answer is <fillin width="5" answer="11" /> 
      </p>
    </statement>
    <evaluation>
      <evaluate>
      <test correct="yes">
      <numcmp use-answer="yes" />
      <feedback>
        <p>
          Each apple is worth 6, each bunch of 4 bananas is worth 4, so each banana is worth 1, and each group of cherries is worth 2. 
          There are only 3 bananas in the question to answer, so 2+6+3=11. 
        </p>
      </feedback>
      </test>
    
      <test>
      <numcmp value="12" />
      <feedback>
        <p>
          You did the algebra correctly!  But this puzzle also contains a visual trick, designed to make 
          people get the question wrong.  Earlier on, there are 4 bananas in each bunch of bananas, so each banana is worth
           1.  But in the question you are asked to answer, the bunch of bananas picture has changed and contains 3 bananas, not 4.   
        </p>
      </feedback>
      </test>
  
      </evaluate>
      </evaluation>
  </exercise>

  <exercise label="fruit-puzzle2">
    <title>Solve a fruit puzzle, image child of figure</title>
    <statement>
      <figure>
        <image width="40%" source="fruitpuzzleimage8.jpeg">
          <shortdescription>an algebra puzzle involving food, claiming most people can't solve it</shortdescription>
        </image>
      </figure>
      <p>
        The image above says that three apples total 18, while an apple plus two bunches of bananas total 14, 
        and a bunch of bananas minus cherries equals 2.  
      </p>
      <p>
        Then it asks a question: how much does cherries plus an apple plus 
        a bunch of bananas equal? The answer is <fillin width="5" answer="11" /> 
      </p>
    </statement>
    <evaluation>
      <evaluate>
      <test correct="yes">
      <numcmp use-answer="yes" />
      <feedback>
        <p>
          Each apple is worth 6, each bunch of 4 bananas is worth 4, so each banana is worth 1, and each group of cherries is worth 2. 
          There are only 3 bananas in the question to answer, so 2+6+3=11. 
        </p>
      </feedback>
      </test>
    
      <test>
      <numcmp value="12" />
      <feedback>
        <p>
          You did the algebra correctly!  But this puzzle also contains a visual trick, designed to make 
          people get the question wrong.  Earlier on, there are 4 bananas in each bunch of bananas, so each banana is worth
           1.  But in the question you are asked to answer, the bunch of bananas picture has changed and contains 3 bananas, not 4.   
        </p>
      </feedback>
      </test>
  
      </evaluate>
      </evaluation>
  </exercise>

  <exercise label="fruit-puzzle3">
    <title>Solve a fruit puzzle, image child of statement</title>
    <statement>
        <image width="40%" source="fruitpuzzleimage8.jpeg">
          <shortdescription>an algebra puzzle involving food, claiming most people can't solve it</shortdescription>
        </image>
      <p>
        The image above says that three apples total 18, while an apple plus two bunches of bananas total 14, 
        and a bunch of bananas minus cherries equals 2.  
      </p>
      <p>
        Then it asks a question: how much does cherries plus an apple plus 
        a bunch of bananas equal? The answer is <fillin width="5" answer="11" /> 
      </p>
    </statement>
    <evaluation>
      <evaluate>
      <test correct="yes">
      <numcmp use-answer="yes" />
      <feedback>
        <p>
          Each apple is worth 6, each bunch of 4 bananas is worth 4, so each banana is worth 1, and each group of cherries is worth 2. 
          There are only 3 bananas in the question to answer, so 2+6+3=11. 
        </p>
      </feedback>
      </test>
    
      <test>
      <numcmp value="12" />
      <feedback>
        <p>
          You did the algebra correctly!  But this puzzle also contains a visual trick, designed to make 
          people get the question wrong.  Earlier on, there are 4 bananas in each bunch of bananas, so each banana is worth
           1.  But in the question you are asked to answer, the bunch of bananas picture has changed and contains 3 bananas, not 4.   
        </p>
      </feedback>
      </test>
  
      </evaluate>
      </evaluation>
  </exercise>

  <exercise label="testmultianswer"><title>MultiAnswer, and the logical <q>and</q></title>
    <introduction>
      <p>
        This problem uses a MultiAnswer, where multiple blanks are needed for the right answer. Since the checking of
        these problems often involves logic, we also demonstrate how to replace the perl <q>and</q> in the pretext source, since ampersands
        are reserved characters.
      </p>
    </introduction>
  <webwork>
    <pg-code>
      $a = 1;
      $b = 1;
      $multians = MultiAnswer($a, $b)->with(
        singleResult => 0,
        checker => sub {
          my ($correct, $student, $self) = @_;
          my ($astu, $bstu) = @{$student};
          my ($acor, $bcor) = @{$correct};
          if ($astu == $bstu &amp;&amp; $astu == 2) {
            return [1,1];
          } else {
            return [0,0];
          }
        }
      );
    </pg-code>
  
    <statement>
      <p>
        Enter two numbers that are equal, and the first one must be a 2: <var name="$multians" width="5"/> <m> = </m> <var name="$multians" width="5"/>
      </p>
    </statement>
  </webwork>
</exercise>

</section>